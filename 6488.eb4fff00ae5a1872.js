"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(L,m,n)=>{n.r(m),n.d(m,{LoginPageModule:()=>x});var c=n(6814),r=n(95),s=n(1509),l=n(3044),p=n(5861),e=n(6689),h=n(5247),f=n(9045);function v(t,a){if(1&t&&(e.TgZ(0,"ion-text",7),e._uU(1),e.qZA()),2&t){const u=e.oxw();e.xp6(1),e.Oqu(u.showUserNotFoundText?"User Not Found":"Reset Mail Sent")}}const T=[{path:"",component:(()=>{var t;class a{constructor(o,i,g,d){this.storageService=o,this.router=i,this.apiService=g,this.fb=d,this.forgotpasswordEmail="",this.showUserNotFoundText=!1,this.alertButtons=[{text:"Send Link",role:"confirm"}],this.alertInputs=[{placeholder:"Email",type:"email"}],this.errorText="",this.loginForm=this.fb.group({email:["",r.kI.required],password:["",r.kI.required]})}ngOnInit(){}setResult(o){console.log(o.detail.data.values[0]),this.apiService.post("password/forgotpassword",{resetEmail:o.detail.data.values[0]}).subscribe(i=>{i.userFound||(this.showUserNotFoundText=!0,setTimeout(()=>{this.showUserNotFoundText=!1},1e3))})}userLogin(){var o=this;console.log(this.loginForm.value),this.apiService.post("user-login",this.loginForm.value).subscribe(i=>{!0===i.auth?this.storageService.setItem("userId",i.user.id).then((0,p.Z)(function*(){yield o.storageService.setItem("email",i.user.email),yield o.storageService.setItem("token",i.token),yield o.storageService.setItem("prem",i.user.premium),o.loginForm.reset(),o.router.navigate(["tabs"])})):!1===i.auth?(this.errorText="Wrong Password",setTimeout(()=>{this.errorText=""},2e3)):"nullexistence"===i.auth&&(this.errorText="User does not exists",setTimeout(()=>{this.errorText=""},2e3))})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(h.V),e.Y36(l.F0),e.Y36(f.s),e.Y36(r.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:28,vars:7,consts:[[3,"translucent"],[3,"fullscreen"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email"],["formControlName","password","type","password"],["id","present-alert"],["trigger","present-alert","header","Reset Password",3,"buttons","inputs","didDismiss"],["color","danger"],["type","submit","expand","full"],[1,"ion-text-center","ion-margin-vertical"],["routerLink","/signup"],["color","danger",4,"ngIf"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"login"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"form",2),e.NdJ("ngSubmit",function(){return i.userLogin()}),e.TgZ(6,"ion-item")(7,"ion-label"),e._uU(8,"Email :- "),e.qZA(),e._UZ(9,"ion-input",3),e.qZA(),e.TgZ(10,"ion-item")(11,"ion-label"),e._uU(12,"Password :- "),e.qZA(),e._UZ(13,"ion-input",4),e.TgZ(14,"ion-text")(15,"a",5),e._uU(16,"Forgot Password"),e.qZA()(),e.TgZ(17,"ion-alert",6),e.NdJ("didDismiss",function(d){return i.setResult(d)}),e.qZA()(),e.TgZ(18,"ion-text",7),e._uU(19),e.qZA(),e.TgZ(20,"ion-button",8),e._uU(21,"Login"),e.qZA(),e.TgZ(22,"div",9)(23,"ion-text"),e._uU(24,"Don't have an account? "),e.TgZ(25,"a",10),e._uU(26,"Sign Up"),e.qZA()()()(),e.YNc(27,v,2,1,"ion-text",11),e.qZA()),2&o&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",i.loginForm),e.xp6(12),e.Q6J("buttons",i.alertButtons)("inputs",i.alertInputs),e.xp6(2),e.Oqu(i.errorText),e.xp6(8),e.Q6J("ngIf",i.showUserNotFoundText))},dependencies:[c.O5,r._Y,r.JJ,r.JL,r.sg,r.u,s.Ge,s.YG,s.W2,s.Gu,s.pK,s.Ie,s.Q$,s.yW,s.wd,s.sr,s.j9,s.Fo,l.rH]}),a})()}];let Z=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(T),l.Bz]}),a})(),x=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,r.u5,r.UX,s.Pc,Z]}),a})()}}]);